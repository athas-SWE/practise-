CREATE TYPE dept_t 
/  

CREATE TYPE emp_t 
/    

    
CREATE TYPE dept_t As OBJECT(
    deptNo CHAR(3),
    deptName VARCHAR(36),
    mgrNo REF emp_t,
    admrDept REF emp_t

)
/
    CREATE TYPE emp_t As OBJECT(
    empNo CHAR(6),
    firstName VARCHAR(12),
    lastName VARCHAR(15),
    workDept REF dept_t,
    sex CHAR(1),
    birthDate DATE ,
    salary NUMBER(8,2)
)
/


    DROP TABLE OREMP


    CREATE TABLE OREMP OF emp_t(
    CONSTRAINT PK_OREMP PRIMARY KEY(empNo) ,
    CONSTRAINT OREMP_FIRSTNAME firstName NOT NULL ,
    CONSTRAINT OREMP_LASTNAME lastName NOT NULL ,
    CONSTRAINT OREMP_SEX CHECK (sex='M' OR sex='F' OR sex='m' OR sex='f')
    )

    
    CREATE TABLE ORDEPT OF dept_t(
    CONSTRAINT PK_ORDEPT PRIMARY KEY(deptNo) ,
    CONSTRAINT ORDEPT_DEPTNAME deptName NOT NULL
    )

    ALTER TABLE OREMP
    ADD CONSTRAINT OREMP_FIRSTNAME firstName NOT Null
	

    CREATE TABLE ORDEPT OF dept_t

ALTER TABLE OREMP
ADD CONSTRAINT PK_OREMP PRIMARY KEY(empNo)


ALTER TABLE OREMP
ADD CONSTRAINT FK_OREMP FOREIGN KEY(workDept) REFERENCES ORDEPT

    ALTER TABLE ORDEPT
ADD CONSTRAINT FK_ORDEPT_1 FOREIGN KEY(mgrNo) REFERENCES OREMP

        ALTER TABLE ORDEPT
ADD CONSTRAINT FK_ORDEPT_2 FOREIGN KEY(admrDept) REFERENCES OREMP

INSERT INTO OREMP VALUES (emp_t(000010 , 'CHRISTINE' , 'HAAS' , NULL , 'F' , '14/AUG/53' , 72750)) ;
INSERT INTO OREMP VALUES (emp_t(000020 , 'MICHAEL' , 'THOMPSON' , NULL , 'M' , '12/FEB/68' , 61250)) ;
INSERT INTO OREMP VALUES (emp_t(000030 , 'SALLY' , 'KWAN' , NULL , 'F' , '11/MAY/71' , 58250)) ;
INSERT INTO OREMP VALUES (emp_t(000060 , 'IRVING' , 'STERN' , NULL , 'M' , '07/JUL/65' , 55555)) ;
INSERT INTO OREMP VALUES (emp_t(000070 , 'EVA' , 'PULASKI' , NULL , 'F' , '26/MAY/73' , 56170)) ;
INSERT INTO OREMP VALUES (emp_t(000050 , 'JOHN' , 'GEYER' , NULL , 'M' , '15/SEP/55' , 60175)) ;
INSERT INTO OREMP VALUES (emp_t(000090 , 'EILEEN' , 'HENDERSON' , NULL , 'F' , '15/MAY/61' , 49750)) ;
INSERT INTO OREMP VALUES (emp_t(000100 , 'THEODORE' ,'SPENSER' , NULL , 'M' , '18/DEC/76' , 46150)) ;

INSERT INTO ORDEPT VALUES (dept_t('A00', 'SPIFFY COMPUTER SERVICE DIV' ,(SELECT ref(e) FROM OREMP e WHERE e.empNo = 000010)  , NULL)) ;
INSERT INTO ORDEPT VALUES (dept_t('B01', 'PLANNING' ,(SELECT ref(e) FROM OREMP e WHERE e.empNo = 000020)  , NULL)) ;
INSERT INTO ORDEPT VALUES (dept_t('C01', 'INFORMATION CENTRE' ,(SELECT ref(e) FROM OREMP e WHERE e.empNo = 000030)  , NULL)) ;
INSERT INTO ORDEPT VALUES (dept_t('D01', 'DEVELOPMENT CENTRE' ,(SELECT ref(e) FROM OREMP e WHERE e.empNo = 000060)  , NULL)) ;


UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'A00')
WHERE empNo = 000010

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'B01')
WHERE empNo = 000020

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'C01')
WHERE empNo = 000030

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'D01')
WHERE empNo = 000060

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'D01')
WHERE empNo = 000070

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'C01')
WHERE empNo = 000050

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'B01')
WHERE empNo = 000090

UPDATE OREMP
SET workDept = (SELECT ref(d) FROM ORDEPT d WHERE d.deptNo = 'B01')
WHERE empNo = 000100

    select * from OREMP









SELECT * FROM OREMP

